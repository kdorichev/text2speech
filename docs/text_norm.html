---

title: Text Normalization

keywords: fastai
sidebar: home_sidebar

summary: "Functions used for TTS Dataset Preparation"
description: "Functions used for TTS Dataset Preparation"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_text_norm.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions-for-Pipeline">Functions for Pipeline<a class="anchor-link" href="#Functions-for-Pipeline"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="collapse_whitespace" class="doc_header"><code>collapse_whitespace</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L12" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>collapse_whitespace</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Replace multiple various whitespaces with a single space, strip leading and trailing spaces.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">collapse_whitespace</span><span class="p">(</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0xfeff&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># zero width no-break space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x200b&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># zero width space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x202f&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># narrow no-break space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x2060&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># word joiner</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x3000&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># ideographic space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0xa0&quot;</span>  <span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># no-break space</span>
    <span class="s2">&quot;</span><span class="se">\t\n</span><span class="s2"> 1 2   3     4     5       </span><span class="se">\t\r\n</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="s2">&quot;1 2 3 4 5&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="lowercase" class="doc_header"><code>lowercase</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L18" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>lowercase</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Convert <code>text</code> to lower case.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">lowercase</span><span class="p">(</span><span class="s1">&#39;ПрИвеТ, ЧуВАК!&#39;</span><span class="p">),</span> 
                  <span class="s1">&#39;привет, чувак!&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="check_no_numbers" class="doc_header"><code>check_no_numbers</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>check_no_numbers</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Return a list of digits, or empty list, if not found.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">check_no_numbers</span><span class="p">(</span><span class="s1">&#39;Цифры есть 1 12 13.4&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="s1">&#39;13&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">check_no_numbers</span><span class="p">(</span><span class="s1">&#39;Цифр нет&#39;</span><span class="p">),</span> <span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_specials" class="doc_header"><code>remove_specials</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L40" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_specials</code>(<strong><code>text</code></strong>:<code>str</code>, <strong><code>purge_digits</code></strong>:<code>bool</code>=<em><code>None</code></em>)</p>
</blockquote>
<p>Replace predefined in <code>_specials</code> sequence of characters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="purge_dots" class="doc_header"><code>purge_dots</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L50" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>purge_dots</code>(<strong><code>text</code></strong>, <strong><code>purgedots</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>If <code>purgedots</code>, <code>...</code>|<code>…</code> will be purged. Else replaced with <code>.</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word...&quot;</span><span class="p">),</span> <span class="s1">&#39;Word.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word…&quot;</span><span class="p">,),</span> <span class="s1">&#39;Word.&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word...&quot;</span><span class="p">,</span> <span class="n">purgedots</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word…&quot;</span><span class="p">,</span>   <span class="n">purgedots</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot; …Word&quot;</span><span class="p">,),</span> <span class="s1">&#39; Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word..&quot;</span><span class="p">,),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s1">&#39;Многоточие... Многоточие… … …Многоточие&#39;</span><span class="p">),</span>
                        <span class="s1">&#39;Многоточие. Многоточие.  Многоточие&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Скобки у аббревиатур (вайфай) удаляем.&#39;</span><span class="p">),</span><span class="s1">&#39;Скобки у аббревиатур вайфай удаляем.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Метки времени 01:12 или 01.01, (01:12) или (01.01) удаляем.&#39;</span><span class="p">),</span>
                        <span class="s1">&#39;Метки времени  или ,  или  удаляем.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Ой!. Ага?. / Стоп.&#39;</span><span class="p">),</span> <span class="s1">&#39;Ой! Ага?  Стоп.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;*США* _Френсис_&#39;</span><span class="p">),</span> <span class="s1">&#39;США Френсис&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="expand_abbreviations" class="doc_header"><code>expand_abbreviations</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L68" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>expand_abbreviations</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p><code>expand_abbreviations()</code> defined in <code>_abbreviations</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span>
    <span class="n">expand_abbreviations</span><span class="p">(</span><span class="s1">&#39;Привет Джон, т.е. Иван. Т.к. русский. И т.д. И т.п.&#39;</span><span class="p">),</span>
                         <span class="s1">&#39;Привет Джон, то есть Иван. так как русский. и так далее. и тому подобное.&#39;</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unify_dash_hyphen" class="doc_header"><code>unify_dash_hyphen</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unify_dash_hyphen</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Unify dash and hyphen symbols -- replace with emdash or hyphen, separate with space.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2212&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># minus sign</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2012&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># figure dash</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2010&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># hyphen</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2011&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))),</span><span class="c1"># non-breaking hyphen</span>
    <span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я &#39;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="s1">&#39;Джейми Кейлер&#39;</span><span class="p">),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я&#39;</span> <span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="s1">&#39;Джейми Кейлер&#39;</span><span class="p">),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">collapse_whitespace</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я&#39;</span> <span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; Джейми Кейлер&#39;</span><span class="p">)),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rm_quot_marks" class="doc_header"><code>rm_quot_marks</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L85" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rm_quot_marks</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Remove quotation marks from <code>text</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">rm_quot_marks</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="se">\&#39;</span><span class="s1">«»‘’‚‛“”„‟‹›❮❯❛❜❝❞❟❠&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Test-Text-Strings-Equality">Test Text Strings Equality<a class="anchor-link" href="#Test-Text-Strings-Equality"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="texts_equal" class="doc_header"><code>texts_equal</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>texts_equal</code>(<strong><code>text1</code></strong>:<code>str</code>, <strong><code>text2</code></strong>:<code>str</code>, <strong><code>ignore_e</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>verbose</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Check if <code>text1</code> equals <code>text2</code>. Optionally ignore diff between <code>е</code> and <code>ё</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;плотные облака не позволили лётчикам найти цели&quot;</span><span class="p">,</span> <span class="s2">&quot;плотные облака не позволили лётчиком найти цели&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(False,
 &#39;плотные облака не позволили лётчикАм найти цели&#39;,
 &#39;плотные облака не позволили лётчикОм найти цели&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;1234&quot;</span><span class="p">,</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;1234&quot;</span><span class="p">,</span> <span class="s2">&quot;12345&quot;</span><span class="p">))</span>
<span class="c1">#test_stdout(lambda: test_eq(texts_equal(&quot;1234&quot;, &quot;12345&quot;, verbose = True), False), &quot;Not equal length&quot;)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">,</span> <span class="n">ignore_e</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">,</span> <span class="n">ignore_e</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;всЕ&quot;</span><span class="p">,</span> <span class="s2">&quot;всЁ&quot;</span><span class="p">))</span>
<span class="c1">#test_stdout(lambda: texts_equal(&quot;все&quot;, &quot;всё&quot;, ignore_e = False, verbose = True), &quot;всЕ != всЁ&quot;)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;слово ещё одно&quot;</span><span class="p">,</span> <span class="s2">&quot;слово ещё одно&quot;</span><span class="p">),</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="s2">&quot;слово ещё одно&quot;</span><span class="p">,</span> <span class="s2">&quot;слово ещё одно&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pipelines">Pipelines<a class="anchor-link" href="#Pipelines"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">basic_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="s2">&quot;Basic pipeline: lowercase and collapse whitespaces.&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">lowercase</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">collapse_whitespace</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="basic_cleaner" class="doc_header"><code>basic_cleaner</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L132" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>basic_cleaner</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Basic pipeline: lowercase and collapse whitespaces.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">basic_cleaner</span><span class="p">(</span>
    <span class="s1">&#39;Привет   Джон, т.е. Иван, т.к. русский. И т.д.   и т.п.&#39;</span><span class="p">),</span>
    <span class="s1">&#39;привет джон, т.е. иван, т.к. русский. и т.д. и т.п.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">purge_digits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_purge_dots</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="s2">&quot;Pipeline for cleaning Russian text.&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">lowercase</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">expand_abbreviations</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">remove_specials</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">purge_digits</span><span class="o">=</span><span class="n">purge_digits</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">purge_dots</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">purgedots</span><span class="o">=</span><span class="n">_purge_dots</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">rm_quot_marks</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">collapse_whitespace</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="russian_cleaner" class="doc_header"><code>russian_cleaner</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L139" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>russian_cleaner</code>(<strong><code>text</code></strong>, <strong><code>purge_digits</code></strong>=<em><code>True</code></em>, <strong><code>_purge_dots</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Pipeline for cleaning Russian text.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span>
        <span class="s1">&#39;Привет «Джон», т.е.     Иван, т.к. русский... И т.д. и т.п. Ой!. Ага?. / &quot;Стоп&quot;..&#39;</span><span class="p">),</span>
        <span class="s1">&#39;привет джон, то есть иван, так как русский. и так далее. и тому подобное. ой! ага? стоп&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sentences-Tokenizer">Sentences Tokenizer<a class="anchor-link" href="#Sentences-Tokenizer"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">nltk</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;/home/condor/git/cyrillica/b-ish.txt&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;\ufeff\n\n\n\n\n\n\n\nВсе думают, что знают историю Америки, но когда заходит речь о морских приключениях, мы пересказываем сказки. Взять хотя бы морских чудовищ – пиратов. Вы знали, что они сражались совсем не так, как нам показывают в кино? И что Чёрная Борода боялся, как бы враги не раскрыли его секрет? И что за фокусы с исчезновением показывает Бермудский треугольник? (00:25) Инопланетяне не угоняли звено «девятнадцать», виновник жил у нас дома. Суши вёсла, парень, я – Джейми Кэйлер. Пора порубить мифы на мелкие кусочки… и выкопать сундук… с правдой. \n\n\nАМЕРИКА:  ФАКТЫ  И  ДОМЫСЛЫ\n\n\nЗолотой век пиратства пришёлся на период с тысяча шестьсот  девяностого по тысяча семьсот тридцатый год. Но большинство пиратов быстро отходили от дел. Эдвард Тич.. знаменитый Чёрная Борода.. наводил страх на моря меньше двух лет. Как и многие пираты, он получил раннюю пенсию.. вместе с ударом абордажной сабли. Короткая карьера, зато наследие на века. Но всё, что мы знаем, омыто океаном фантазии. Аж поджилки трясутся.\n\n\nРеальность пиратства далеко не романтична.\n\n\nКевин Макдоналд, Университет Лойолы\n\n\nДалеко не Голливуд.\n\n\nМиф складывался постепенно.\n\n\nРоберт Ричи, писатель\n\n\nВот что мы уже знаем про пиратов и пиратство, детки. / Волны Карибского моря и Атлантики не знают закона из-за орды варваров в маскарадных костюмах. \n\n\nПовязка на одном глазу, деревянная нога, попугай на плече, вооружены до зубов.\n\n\nПод командованием капитанов-самодуров корабли под флагом с черепом и костями.. обрушивают шквал ядер на торговые суда, вырезают команды и заставляют оставшихся в живых пройти по доске. / 02:30 Захватив золото, серебро, драгоценности и дублоны, пираты прятали добычу в тайном месте и перепрятывали с помощью карты-головоломки. Верно?\n\n\nДОМЫСЕЛ \n\n\nВ этой лихой истории спрятан целый сундук заблуждений, начиная с образа безбашенного капитана, которому все подчиняются. На самом деле власть опасного Чёрного Бороды была жёстко ограничена демократическими правилами пиратов.\n\n\nОни голосовали по каждому поводу.\n\n\nКристин Маркель Лампе, писатель\n\n\nОни могли изгнать капитана. Но только не во время битвы.\n\n\nПалубная демократия ничуть не похожа на диктатуру и унижения в европейском флоте. Враги пиратов, капитаны военных кораблей – вот настоящие тираны морей. \n\n\nОни считали матросов.. тупицами и.. отбросами…\n\n\nГейл Селинджер, писатель\n\n\nДержать их в узде можно только с помощью лишений.. и наказаний. А пираты, почти все, были.. матросами, и когда они уходили к пиратам, их экипажи не желали давать одному человеку столько власти. \n\n\nТолько во время боя власть капитана была абсолютной. И он может наводить ужас сколько пожелает. Перед каждым боем Чёрная борода… украшал волосы… медленно тлеющими запалами: казалось, что у него голова горит. \n\n\nПредставьте: стоите вы на палубе, и на вас надвигается огромный мужик с бородой, и вокруг его головы вьётся дым. ..Какой вы ни крутой, а всё равно закричите «помоги господи».\n\n\nА как же другие пиратские примочки? Крюки, повязки на глаза, костыли?\n\n\nА вот это всё правда.\n\n\nПираты – любимые клиенты изготовителей протезов, потому что в море легко получить увечье. Это боевые раны и травмы из-за плохо закреплённого груза. / 04:51 А ещё могут упасть снасти. / Но, несмотря на нехватку частей тела, пираты всё равно набивали сундуки дублонами. Верно?\n\n\nДОМЫСЕЛ \n\n\nБогатая добыча – большая редкость. Обычно пиратам доставались… карты, оружие, паруса, ром, мыло, свечи или одежда. \n\n\nОни не накопили… богатств. Тем более сокровищ. Они ухитрялись жить на огрызках… выживать.\n\n\nПиратам нужны люди. Поэтому в любой добыче, которую брали на кораблях, важны мужчины. Они выполняли различные задачи на корабле.\n\n\nА как же знаменитые набеги, когда в их крюки попадало бесценное сокровище? Его закапывали и составляли карту? \n\n\nДОМЫСЕЛ\n\n\nЧто за вздор, парень. Пираты… ничего не запасали на чёрный день. \n\n\nПираты спускали добычу быстро, как только заходили в порт: пьянство, азартные игры, женщины. Деньги тратились при первой возможности.\n\n\nПираты не держались за свои сокровища, потому что не рассчитывали прожить долго. \n\n\nТогда почему мы принимаем фантазии о закопанных сокровищах и картах за факты? Скажем спасибо шотландскому писателю Роберту Льюису Стивенсону и залихватским приключениям, которые он описал в тысяча восемьсот восемьдесят третьем году. \n\n\nПочти всё, что мы знаем и представляем себе о пиратах, взято из «Острова сокровищ» Стивенсона. Он придумал, что пираты закапывали сокровища.\n\n\nА ещё он придумал тайные карты, на которых нужное место отмечено крестом.\n\n\nОн нарисовал карту ещё до того, как написал роман, так что вся книжка была написала вокруг маленького крестика на карте. \n\n\nОн же придумал «пятнадцать человек на сундук мертвеца – йо-хо-хо и бутылка рома».\n\n\nДиснеевский фильм пятидесятого года добавил ещё один миф. Джона Сильвера играл Роберт Ньютон, и он придумал характерный говорок, рычание. \n\n\nПираты не рычали, Роберт Ньютон придумал это для образа, и раскатистое «Эр» стало признаком пирата.\n\n\nЖенщины-пираты встречались нечасто, но кое-кто нацепил абордажную саблю и запугивал океаны вместе с мужчинами. Лучше всех известна Энн Бонни. Она была женой капитана..и обвинила его в том, что они попались. Все мужчины на корабле напились.. и не могли сражаться. Так родилось величайшее пиратское оскорбление: сражался бы как мужчина – не висел бы, как собака. / 07:54 Другие факты в литературе тоже вызывают вопросы. Возьмём флаг с черепом и костями. Он действительно развевался на каждом пиратском корабле, да?\n\n\nДОМЫСЕЛ \n\n\nЖуткая эмблема – настоящая. Но на самом деле у пиратов флагов было не меньше, чем в ООН. Череп с костями – лишь один из них. Пираты часто обманывали жертв, поднимая флаг дружественной страны. Многие капитаны делали личные флаги с мерзкими рисунками, чтобы запугивать жертв. \n\n\nИх было не меньше, чем банд сегодня, это личный знак. По нему узнавали, какой именно пират на корабле.\n\n\nЧто бы ни было на флаге, суть одна: вы все умрёте, если будете сопротивляться. Так что… Не пытайтесь.\n\n\nНо легенды гласят, что военные и торговые суда вооружены и опасны. ..А обычное нападение пиратов – это всегда кровавое сражение, верно?\n\n\nДОМЫСЕЛ\n\n\nУвы. Только в Голливуде.\n\n\nВ истории известно несколько пиратских сражений. Но чаще всего пираты грабили корабли мирно, а не заставляли подчиниться силой. \n\n\nЧтобы торговый корабль сдался, нужно вооружиться до зубов, набрать головорезов и показать капитана с жуткой репутацией.\n\n\nНеизвестный пират – вообще не пират. Поэтому Чёрная Борода окружал своё имя ужасом, подобрал костюм и образ. Если вы слышали имя Чёрного Бороды, если видели, как приближается его корабль, вы скорее всего сдадитесь сами. Спасибо репутации. \n\n\nВот он, главный секрет Чёрной Бороды. Мы считаем его символом… пиратской жестокости и кровавых убийств, но его сабля была удивительно чиста.\n\n\nДо последней битвы.. нет доказательств, что он кого-то убивал.\n\n\nЕсть и другая причина, почему сражения с пиратами были редки.\n\n\nУ моряков на торговом судне нет причин воевать. Корабль не твой, груз не твой. Зачем за них умирать?\n\n\nНо кое-кто не желает унижаться. Перчатки в сторону, два готовых к бою корабля начинают обстреливать друг друга ядрами. \n\n\nДОМЫСЕЛ \n\n\nПрости, Эррол Флинн. Это всё целлулоид.\n\n\nНе вставали корабли друг напротив друга и не перебрасывались ядрами. Подумайте сами: пушечное ядро пробивает корпус, он же деревянный, судно потонет.\n\n\nВ таком случае вместе с кораблём потонет и добыча, которая нужна пиратам. Считанные сражения, записанные в источниках, – это мелкие перестрелки из мушкетов, ручная схватка на абордажных саблях. А когда дым развеется и пираты победят? Тогда побеждённые слабаки пойдут по доске. Ага, угадали.\n\n\nПроход по доске – один из самых знаменитых мифов о пиратах. На самом деле – ложь. \n\n\nСомневаюсь, что пираты озаботились бы какой-то доской для пленных капитанов. Много чести. Их просто.. бросали за борт.\n\n\nА как же мрачный конец рок-звезды пиратства, Чёрной Бороды? / В тысяча семьсот восемнадцатом году.. его выследил… частный корабль, нанятый губернатором Виргинии. Это бой… в полном соответствии с легендами. Всё правда: чем страшнее пират.. тем труднее его погубить. \n\n\nПосчитали: на нём было двадцать пять колотых ран. / И пять огнестрельных, и только потом его убили ударом сабли сзади, в шею.\n\n\nЭти же воды, что бороздил Чёрная Борода, в другое время прославится катастрофами и исчезновениями, которые многие не могут объяснить. Давайте изучим географию таинственного треугольника и отделим… факты от домыслов.\n\n\nАМЕРИКА:  ФАКТЫ  И  ДОМЫСЛЫ  //  14.01  АМЕРИКА:  ФАКТЫ  И  ДОМЫСЛЫ\n\n\nБермудский треугольник не обозначен ни на одной карте, но занимает постоянное место в людском воображении. Это пространство южнее Флориды, где пропало больше сотни судов и самолётов.. и больше тысячи человек. / Говорят, они стали жертвами не то инопланетян, не то провалов, не то высоких технологий времён Атлантиды. Это правда… или вымысел, живущий… только потому, что факты.. тоже исчезли?\n\n\nБермудский треугольник – классический американский миф.\n\n\nБенджамен Редфорд, писатель\n\n\nРок у наших берегов.\n\n\nОреол тайны.\n\n\nДжо Никел, писатель\n\n\nНо эта тайна рукотворна.\n\n\nОт легенды о Бермудском треугольнике… мурашки бегут по коже. Мистическое кладбище кораблей и самолётов площадью более миллиона квадратных километров, вершины треугольника – Бермуды, Майами и Пуэрто-Рико. Он поглотил больше судов и самолётов, чем любой другой регион Земли. Ни одно исчезновение нельзя разумно объяснить. Просто мрак. И ведь правда…\n\n\nДОМЫСЕЛ \n\n\nВместе с водой выплеснули факты. Начиная с того, что количество исчезновений здесь.. самое большое на планете.\n\n\nОбъекты пропадают здесь не чаще, даже не таинственней, чем в других регионах планеты.\n\n\nУзнайте у страховых компаний. Страховка для кораблей и самолётов, путешествующих здесь, стоит не больше любой другой. А как же загадка этих исчезновений? Их можно объяснить только паранормальными явлениями. Так?\n\n\nДОМЫСЕЛ \n\n\nНет. Любое исчезновение можно объяснить рационально. \n\n\nДавайте спросим специалистов-мореходов. Или военных экспертов – у них нет вопросов. Они понимают, что есть факторы – человеческий.. ошибка оборудования и так далее. Когда человек в море один, очень легко попасть в беду. \n\n\nДобавим к этому, что у погоды в треугольнике дурная слава: она меняется очень быстро. Но это не объясняет, почему никогда… не остаётся обломков крушения самолётов и кораблей. Несомненно, их забрали сверхъестественные существа. Или?..\n\n\nДОМЫСЕЛ \n\n\nБермудский треугольник – идеальное место для уничтожения улик. Почти везде его глубина – шесть километров. А в менее глубоких местах всё уносит Гольфстрим – мощное течение, скорость которого – сто километров в час. \n\n\nТечения могут унести любой предмет куда угодно. Сегодня вещь здесь, а через неделю – в сотнях километров. Не удивительно, что ничего не могут найти. \n\n\nИсчезновения в Бермудском треугольнике.. можно объяснить без каких-то разрывов времени, / инопланетян… / Тогда откуда такая репутация?\n\n\nЭто журналистский миф. Легенда.. создана ошибками.. и заблуждениями, репортёрами и писателями.\n\n\nРождение мифа о треугольнике восходит к шестидесятым и семидесятым годам двадцатого века, когда дешёвые журналы и книги собирают одни факты и отбрасывают другие. Сплетают сенсации и продают выдумку. Дальше фантазии плодятся. Пресса охотно их повторяет и создаёт один из самых устойчивых мифов популярной культуры. Цепь искажений приводит к рождению базовой легенды треугольника – звено «девятнадцать». В сорок пятом году пять бомбардировщиков отправились в плановый учебный полёт. Их ведущий, лейтенант Чарльз Тейлор, передал по радио загадочный крик о помощи.\n\n\nОн сказал нечто в духе «океан какой-то странный; не пойму, где Запад, я не знаю, где я».\n\n\nА потом.. внезапно.. пять бомбардировщиков… исчезли. ..Что хуже.. посланный на их поиски шестой самолёт… тоже.. исчез без следа. \n\n\nКогда Стивен Спилберг снимал «Близкие контакты третьей степени», он искал яркое начало. В его фильме учёные во время песчаной бури сделали в пустыне Мохаве шокирующее открытие. Это пять самолётов звена «девятнадцать», давно пропавшие в Бермудском треугольнике. Оказывается, бомбардировщики были похищены инопланетянами и в конце фильма возвращены на Землю. / 19:18 Как-то так. Отличный фильм. Но настоящая история звена «девятнадцать»… / совсем другое кино. / 19:29 Леденящая кровь деталь – последнее сообщение лейтенанта Чарльза Тейлора, сказавшего, цитирую: «океан какой-то странный». Он совершенно дизориентирован. \n\n\nМы слышим голос исчезающего человека. Дух захватывает. По этой причине накрутили столько тайн. \n\n\nТейлор описывает паранормальное явление, сбившее с пути целую эскадрилью, так?\n\n\nДОМЫСЕЛ \n\n\nНет. / Нет ничего необъяснимого в истории звена «девятнадцать». Это трагическая, роковая ошибка пилотирования. \n\n\nНа самом деле Тейлор и всё звено погибли потому, что он заблудился. Не знал, куда залетел. И все пропали вместе с ним. Потому что командует он. \n\n\nПропажу самолётов расследовали и написали пятисот-страничный отчёт. / Когда самолёты отправились в учебный полёт, небо было ясное. / 20:32 Но потом начался шторм. Видимость падает, Тейлор окончательно теряется. Он находится именно там, где должен быть по плану, над Багамскими островами. Но у него сломаны два компаса, и он считает, что под ним – Флорида Кис в Мексиканском заливе. Он ведёт самолёты на восток, рассчитывая попасть на западный берег Флориды. Но уводит пилотов-учеников дальше в открытый океан. \n\n\nУжасно, что минимум один из них, если не два, понимали, где они, понимали, что им нужно повернуть на запад как можно скорее. И сказали об этом. Почему все летели на восток? Потому что командовал Тейлор. А он / ничего не понимал.\n\n\nЧто имел в виду Тейлор, когда говорил про океан? Здесь тоже есть проблема. \n\n\nТейлор этого не говорил. Такой цитаты нет в отчёте.\n\n\nВот так-то: знаменитую цитату выдумал один писатель-фантазёр, чтобы создать сенсационную историю. Остальные за ним повторяли. \n\n\nНо даже если бы Тейлор это сказал, это было бы нормально, он же не понимал, где он. Это значит: я не узнаю местность, над которой лечу. Так и было. Это мы знаем точно.\n\n\nТрагическая правда заключается в том, что у самолётов закончилось топливо. / 22:13 Они упали где-то в Атлантике. Пять бомбардировщиков утонули.. и пилоты вместе с ними. ..Но это не объясняет пропажу шестого самолёта… с тринадцатью поисковиками и спасателями. Вот это – необъяснимо. \n\n\nДОМЫСЕЛ \n\n\nПричина понятна. На поиски отправили самолёт «Мартин Маринер», «летающий топливный бак»: он может оставаться в воздухе двадцать четыре часа. Известно, что топливо часто протекало, самолёты загорались. Военные решили, что самолёт взорвался.\n\n\nЭто не просто версия: проходивший корабль записал… взрыв… этого самолёта. \n\n\nВзрыв в небе там, где должен быть самолёт-спасатель, видели с парохода «Гейнз Миллз».  Что это?\n\n\nКак и все таинственные исчезновения в Бермудском треугольнике, самое известное из них тонет под грузом фактов. И всё же… мифы вроде Треугольника напоминают нам, что мы часто выбираем фантазии, потому что любим тайны. Но давайте не забывать. Мы должны сделать так, чтобы правда… не пропала.\n\n\nПрограмма озвучена на\xa0студии\xa0«Кириллица». Текст читал Алексей Войтюк.\n\n\n\n\n1\n\n\n&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;все думают, что знают историю америки, но когда заходит речь о морских приключениях, мы пересказываем сказки. взять хотя бы морских чудовищ – пиратов. вы знали, что они сражались совсем не так, как нам показывают в кино? и что чёрная борода боялся, как бы враги не раскрыли его секрет? и что за фокусы с исчезновением показывает бермудский треугольник? инопланетяне не угоняли звено девятнадцать, виновник жил у нас дома. суши вёсла, парень, я – джейми кэйлер. пора порубить мифы на мелкие кусочки. и выкопать сундук. с правдой. америка: факты и домыслы золотой век пиратства пришёлся на период с тысяча шестьсот девяностого по тысяча семьсот тридцатый год. но большинство пиратов быстро отходили от дел. эдвард тич знаменитый чёрная борода наводил страх на моря меньше двух лет. как и многие пираты, он получил раннюю пенсию вместе с ударом абордажной сабли. короткая карьера, зато наследие на века. но всё, что мы знаем, омыто океаном фантазии. аж поджилки трясутся. реальность пиратства далеко не романтична. кевин макдоналд, университет лойолы далеко не голливуд. миф складывался постепенно. роберт ричи, писатель вот что мы уже знаем про пиратов и пиратство, детки. волны карибского моря и атлантики не знают закона из-за орды варваров в маскарадных костюмах. повязка на одном глазу, деревянная нога, попугай на плече, вооружены до зубов. под командованием капитанов-самодуров корабли под флагом с черепом и костями обрушивают шквал ядер на торговые суда, вырезают команды и заставляют оставшихся в живых пройти по доске. захватив золото, серебро, драгоценности и дублоны, пираты прятали добычу в тайном месте и перепрятывали с помощью карты-головоломки. верно? домысел в этой лихой истории спрятан целый сундук заблуждений, начиная с образа безбашенного капитана, которому все подчиняются. на самом деле власть опасного чёрного бороды была жёстко ограничена демократическими правилами пиратов. они голосовали по каждому поводу. кристин маркель лампе, писатель они могли изгнать капитана. но только не во время битвы. палубная демократия ничуть не похожа на диктатуру и унижения в европейском флоте. враги пиратов, капитаны военных кораблей – вот настоящие тираны морей. они считали матросов тупицами и отбросами. гейл селинджер, писатель держать их в узде можно только с помощью лишений и наказаний. а пираты, почти все, были матросами, и когда они уходили к пиратам, их экипажи не желали давать одному человеку столько власти. только во время боя власть капитана была абсолютной. и он может наводить ужас сколько пожелает. перед каждым боем чёрная борода. украшал волосы. медленно тлеющими запалами: казалось, что у него голова горит. представьте: стоите вы на палубе, и на вас надвигается огромный мужик с бородой, и вокруг его головы вьётся дым. какой вы ни крутой, а всё равно закричите помоги господи. а как же другие пиратские примочки? крюки, повязки на глаза, костыли? а вот это всё правда. пираты – любимые клиенты изготовителей протезов, потому что в море легко получить увечье. это боевые раны и травмы из-за плохо закреплённого груза. а ещё могут упасть снасти. но, несмотря на нехватку частей тела, пираты всё равно набивали сундуки дублонами. верно? домысел богатая добыча – большая редкость. обычно пиратам доставались. карты, оружие, паруса, ром, мыло, свечи или одежда. они не накопили. богатств. тем более сокровищ. они ухитрялись жить на огрызках. выживать. пиратам нужны люди. поэтому в любой добыче, которую брали на кораблях, важны мужчины. они выполняли различные задачи на корабле. а как же знаменитые набеги, когда в их крюки попадало бесценное сокровище? его закапывали и составляли карту? домысел что за вздор, парень. пираты. ничего не запасали на чёрный день. пираты спускали добычу быстро, как только заходили в порт: пьянство, азартные игры, женщины. деньги тратились при первой возможности. пираты не держались за свои сокровища, потому что не рассчитывали прожить долго. тогда почему мы принимаем фантазии о закопанных сокровищах и картах за факты? скажем спасибо шотландскому писателю роберту льюису стивенсону и залихватским приключениям, которые он описал в тысяча восемьсот восемьдесят третьем году. почти всё, что мы знаем и представляем себе о пиратах, взято из острова сокровищ стивенсона. он придумал, что пираты закапывали сокровища. а ещё он придумал тайные карты, на которых нужное место отмечено крестом. он нарисовал карту ещё до того, как написал роман, так что вся книжка была написала вокруг маленького крестика на карте. он же придумал пятнадцать человек на сундук мертвеца – йо-хо-хо и бутылка рома. диснеевский фильм пятидесятого года добавил ещё один миф. джона сильвера играл роберт ньютон, и он придумал характерный говорок, рычание. пираты не рычали, роберт ньютон придумал это для образа, и раскатистое эр стало признаком пирата. женщины-пираты встречались нечасто, но кое-кто нацепил абордажную саблю и запугивал океаны вместе с мужчинами. лучше всех известна энн бонни. она была женой капитанаи обвинила его в том, что они попались. все мужчины на корабле напились и не могли сражаться. так родилось величайшее пиратское оскорбление: сражался бы как мужчина – не висел бы, как собака. другие факты в литературе тоже вызывают вопросы. возьмём флаг с черепом и костями. он действительно развевался на каждом пиратском корабле, да? домысел жуткая эмблема – настоящая. но на самом деле у пиратов флагов было не меньше, чем в оон. череп с костями – лишь один из них. пираты часто обманывали жертв, поднимая флаг дружественной страны. многие капитаны делали личные флаги с мерзкими рисунками, чтобы запугивать жертв. их было не меньше, чем банд сегодня, это личный знак. по нему узнавали, какой именно пират на корабле. что бы ни было на флаге, суть одна: вы все умрёте, если будете сопротивляться. так что. не пытайтесь. но легенды гласят, что военные и торговые суда вооружены и опасны. а обычное нападение пиратов – это всегда кровавое сражение, верно? домысел увы. только в голливуде. в истории известно несколько пиратских сражений. но чаще всего пираты грабили корабли мирно, а не заставляли подчиниться силой. чтобы торговый корабль сдался, нужно вооружиться до зубов, набрать головорезов и показать капитана с жуткой репутацией. неизвестный пират – вообще не пират. поэтому чёрная борода окружал своё имя ужасом, подобрал костюм и образ. если вы слышали имя чёрного бороды, если видели, как приближается его корабль, вы скорее всего сдадитесь сами. спасибо репутации. вот он, главный секрет чёрной бороды. мы считаем его символом. пиратской жестокости и кровавых убийств, но его сабля была удивительно чиста. до последней битвы нет доказательств, что он кого-то убивал. есть и другая причина, почему сражения с пиратами были редки. у моряков на торговом судне нет причин воевать. корабль не твой, груз не твой. зачем за них умирать? но кое-кто не желает унижаться. перчатки в сторону, два готовых к бою корабля начинают обстреливать друг друга ядрами. домысел прости, эррол флинн. это всё целлулоид. не вставали корабли друг напротив друга и не перебрасывались ядрами. подумайте сами: пушечное ядро пробивает корпус, он же деревянный, судно потонет. в таком случае вместе с кораблём потонет и добыча, которая нужна пиратам. считанные сражения, записанные в источниках, – это мелкие перестрелки из мушкетов, ручная схватка на абордажных саблях. а когда дым развеется и пираты победят? тогда побеждённые слабаки пойдут по доске. ага, угадали. проход по доске – один из самых знаменитых мифов о пиратах. на самом деле – ложь. сомневаюсь, что пираты озаботились бы какой-то доской для пленных капитанов. много чести. их просто бросали за борт. а как же мрачный конец рок-звезды пиратства, чёрной бороды? в тысяча семьсот восемнадцатом году его выследил. частный корабль, нанятый губернатором виргинии. это бой. в полном соответствии с легендами. всё правда: чем страшнее пират тем труднее его погубить. посчитали: на нём было двадцать пять колотых ран. и пять огнестрельных, и только потом его убили ударом сабли сзади, в шею. эти же воды, что бороздил чёрная борода, в другое время прославится катастрофами и исчезновениями, которые многие не могут объяснить. давайте изучим географию таинственного треугольника и отделим. факты от домыслов. америка: факты и домыслы америка: факты и домыслы бермудский треугольник не обозначен ни на одной карте, но занимает постоянное место в людском воображении. это пространство южнее флориды, где пропало больше сотни судов и самолётов и больше тысячи человек. говорят, они стали жертвами не то инопланетян, не то провалов, не то высоких технологий времён атлантиды. это правда. или вымысел, живущий. только потому, что факты тоже исчезли? бермудский треугольник – классический американский миф. бенджамен редфорд, писатель рок у наших берегов. ореол тайны. джо никел, писатель но эта тайна рукотворна. от легенды о бермудском треугольнике. мурашки бегут по коже. мистическое кладбище кораблей и самолётов площадью более миллиона квадратных километров, вершины треугольника – бермуды, майами и пуэрто-рико. он поглотил больше судов и самолётов, чем любой другой регион земли. ни одно исчезновение нельзя разумно объяснить. просто мрак. и ведь правда. домысел вместе с водой выплеснули факты. начиная с того, что количество исчезновений здесь самое большое на планете. объекты пропадают здесь не чаще, даже не таинственней, чем в других регионах планеты. узнайте у страховых компаний. страховка для кораблей и самолётов, путешествующих здесь, стоит не больше любой другой. а как же загадка этих исчезновений? их можно объяснить только паранормальными явлениями. так? домысел нет. любое исчезновение можно объяснить рационально. давайте спросим специалистов-мореходов. или военных экспертов – у них нет вопросов. они понимают, что есть факторы – человеческий ошибка оборудования и так далее. когда человек в море один, очень легко попасть в беду. добавим к этому, что у погоды в треугольнике дурная слава: она меняется очень быстро. но это не объясняет, почему никогда. не остаётся обломков крушения самолётов и кораблей. несомненно, их забрали сверхъестественные существа. или? домысел бермудский треугольник – идеальное место для уничтожения улик. почти везде его глубина – шесть километров. а в менее глубоких местах всё уносит гольфстрим – мощное течение, скорость которого – сто километров в час. течения могут унести любой предмет куда угодно. сегодня вещь здесь, а через неделю – в сотнях километров. не удивительно, что ничего не могут найти. исчезновения в бермудском треугольнике можно объяснить без каких-то разрывов времени, инопланетян. тогда откуда такая репутация? это журналистский миф. легенда создана ошибками и заблуждениями, репортёрами и писателями. рождение мифа о треугольнике восходит к шестидесятым и семидесятым годам двадцатого века, когда дешёвые журналы и книги собирают одни факты и отбрасывают другие. сплетают сенсации и продают выдумку. дальше фантазии плодятся. пресса охотно их повторяет и создаёт один из самых устойчивых мифов популярной культуры. цепь искажений приводит к рождению базовой легенды треугольника – звено девятнадцать. в сорок пятом году пять бомбардировщиков отправились в плановый учебный полёт. их ведущий, лейтенант чарльз тейлор, передал по радио загадочный крик о помощи. он сказал нечто в духе океан какой-то странный; не пойму, где запад, я не знаю, где я. а потом внезапно пять бомбардировщиков. исчезли. что хуже посланный на их поиски шестой самолёт. тоже исчез без следа. когда стивен спилберг снимал близкие контакты третьей степени, он искал яркое начало. в его фильме учёные во время песчаной бури сделали в пустыне мохаве шокирующее открытие. это пять самолётов звена девятнадцать, давно пропавшие в бермудском треугольнике. оказывается, бомбардировщики были похищены инопланетянами и в конце фильма возвращены на землю. как-то так. отличный фильм. но настоящая история звена девятнадцать. совсем другое кино. леденящая кровь деталь – последнее сообщение лейтенанта чарльза тейлора, сказавшего, цитирую: океан какой-то странный. он совершенно дизориентирован. мы слышим голос исчезающего человека. дух захватывает. по этой причине накрутили столько тайн. тейлор описывает паранормальное явление, сбившее с пути целую эскадрилью, так? домысел нет. нет ничего необъяснимого в истории звена девятнадцать. это трагическая, роковая ошибка пилотирования. на самом деле тейлор и всё звено погибли потому, что он заблудился. не знал, куда залетел. и все пропали вместе с ним. потому что командует он. пропажу самолётов расследовали и написали пятисот-страничный отчёт. когда самолёты отправились в учебный полёт, небо было ясное. но потом начался шторм. видимость падает, тейлор окончательно теряется. он находится именно там, где должен быть по плану, над багамскими островами. но у него сломаны два компаса, и он считает, что под ним – флорида кис в мексиканском заливе. он ведёт самолёты на восток, рассчитывая попасть на западный берег флориды. но уводит пилотов-учеников дальше в открытый океан. ужасно, что минимум один из них, если не два, понимали, где они, понимали, что им нужно повернуть на запад как можно скорее. и сказали об этом. почему все летели на восток? потому что командовал тейлор. а он ничего не понимал. что имел в виду тейлор, когда говорил про океан? здесь тоже есть проблема. тейлор этого не говорил. такой цитаты нет в отчёте. вот так-то: знаменитую цитату выдумал один писатель-фантазёр, чтобы создать сенсационную историю. остальные за ним повторяли. но даже если бы тейлор это сказал, это было бы нормально, он же не понимал, где он. это значит: я не узнаю местность, над которой лечу. так и было. это мы знаем точно. трагическая правда заключается в том, что у самолётов закончилось топливо. они упали где-то в атлантике. пять бомбардировщиков утонули и пилоты вместе с ними. но это не объясняет пропажу шестого самолёта. с тринадцатью поисковиками и спасателями. вот это – необъяснимо. домысел причина понятна. на поиски отправили самолёт мартин маринер, летающий топливный бак: он может оставаться в воздухе двадцать четыре часа. известно, что топливо часто протекало, самолёты загорались. военные решили, что самолёт взорвался. это не просто версия: проходивший корабль записал. взрыв. этого самолёта. взрыв в небе там, где должен быть самолёт-спасатель, видели с парохода гейнз миллз. что это? как и все таинственные исчезновения в бермудском треугольнике, самое известное из них тонет под грузом фактов. и всё же. мифы вроде треугольника напоминают нам, что мы часто выбираем фантазии, потому что любим тайны. но давайте не забывать. мы должны сделать так, чтобы правда. не пропала. программа озвучена на студии кириллица. текст читал алексей войтюк.&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-characters-in-the-origial-text">Set of characters in the origial text<a class="anchor-link" href="#Set-of-characters-in-the-origial-text"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">text</span><span class="p">))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
 	32	0x20	True
,	44	0x2c	True
-	45	0x2d	True
.	46	0x2e	True
:	58	0x3a	True
;	59	0x3b	True
?	63	0x3f	True
а	1072	0x430	True
б	1073	0x431	True
в	1074	0x432	True
г	1075	0x433	True
д	1076	0x434	True
е	1077	0x435	True
ж	1078	0x436	True
з	1079	0x437	True
и	1080	0x438	True
й	1081	0x439	True
к	1082	0x43a	True
л	1083	0x43b	True
м	1084	0x43c	True
н	1085	0x43d	True
о	1086	0x43e	True
п	1087	0x43f	True
р	1088	0x440	True
с	1089	0x441	True
т	1090	0x442	True
у	1091	0x443	True
ф	1092	0x444	True
х	1093	0x445	True
ц	1094	0x446	True
ч	1095	0x447	True
ш	1096	0x448	True
щ	1097	0x449	True
ъ	1098	0x44a	True
ы	1099	0x44b	True
ь	1100	0x44c	True
э	1101	0x44d	True
ю	1102	0x44e	True
я	1103	0x44f	True
ё	1105	0x451	True
–	8211	0x2013	True
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-characters-in-the-cleaned-text">Set of characters in the cleaned text<a class="anchor-link" href="#Set-of-characters-in-the-cleaned-text"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">)))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
 	32	0x20	True
,	44	0x2c	True
-	45	0x2d	True
.	46	0x2e	True
:	58	0x3a	True
;	59	0x3b	True
?	63	0x3f	True
а	1072	0x430	True
б	1073	0x431	True
в	1074	0x432	True
г	1075	0x433	True
д	1076	0x434	True
е	1077	0x435	True
ж	1078	0x436	True
з	1079	0x437	True
и	1080	0x438	True
й	1081	0x439	True
к	1082	0x43a	True
л	1083	0x43b	True
м	1084	0x43c	True
н	1085	0x43d	True
о	1086	0x43e	True
п	1087	0x43f	True
р	1088	0x440	True
с	1089	0x441	True
т	1090	0x442	True
у	1091	0x443	True
ф	1092	0x444	True
х	1093	0x445	True
ц	1094	0x446	True
ч	1095	0x447	True
ш	1096	0x448	True
щ	1097	0x449	True
ъ	1098	0x44a	True
ы	1099	0x44b	True
ь	1100	0x44c	True
э	1101	0x44d	True
ю	1102	0x44e	True
я	1103	0x44f	True
ё	1105	0x451	True
–	8211	0x2013	True
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-the-removed/replaced-characters">Set of the removed/replaced characters<a class="anchor-link" href="#Set-of-the-removed/replaced-characters"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span> <span class="nb">set</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">))))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">check_no_numbers</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;Восклицательное предложение! А это какое? Инициалы -- не повод разрывать. Правда, А.С. Пушкин? -- Разумеется, голубчик. (Скобки оставляем.)&#39;&#39;&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sent_detector</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tokenizers/punkt/russian.pickle&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">cache</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;&lt;Loading nltk:tokenizers/punkt/PY3/russian.pickle&gt;&gt;
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sent_detector</span><span class="o">.</span><span class="n">tokenize</span><span class="p">((</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;восклицательное предложение!&#39;,
 &#39;а это какое?&#39;,
 &#39;инициалы -- не повод разрывать.&#39;,
 &#39;правда, а.с. пушкин?&#39;,
 &#39;-- разумеется, голубчик.&#39;,
 &#39;скобки оставляем.&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">sent_tokenize</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="n">language</span><span class="o">=</span><span class="s2">&quot;russian&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sent</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>восклицательное предложение! 

а это какое? 

инициалы -- не повод разрывать. 

правда, а.с. пушкин? 

-- разумеется, голубчик. 

скобки оставляем. 

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

