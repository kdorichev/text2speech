---

title: Text Normalization


keywords: fastai
sidebar: home_sidebar

summary: "Functions used for TTS Dataset Preparation"
description: "Functions used for TTS Dataset Preparation"
nb_path: "nbs/01_text_norm.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_text_norm.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions-for-Pipeline">Functions for Pipeline<a class="anchor-link" href="#Functions-for-Pipeline"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="collapse_whitespace" class="doc_header"><code>collapse_whitespace</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>collapse_whitespace</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Replace multiple various whitespaces with a single space, strip leading and trailing spaces.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">collapse_whitespace</span><span class="p">(</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0xfeff&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># zero width no-break space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x200b&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># zero width space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x202f&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># narrow no-break space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x2060&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># word joiner</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0x3000&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># ideographic space</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0xa0&quot;</span>  <span class="p">,</span> <span class="mi">16</span><span class="p">))</span> <span class="o">+</span> <span class="c1"># no-break space</span>
    <span class="s2">&quot;</span><span class="se">\t\n</span><span class="s2"> 1 2   3     4     5       </span><span class="se">\t\r\n</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="s2">&quot;1 2 3 4 5&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="lowercase" class="doc_header"><code>lowercase</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>lowercase</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Convert <code>text</code> to lower case.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">lowercase</span><span class="p">(</span><span class="s1">&#39;ПрИвеТ, ЧуВАК!&#39;</span><span class="p">),</span> 
                  <span class="s1">&#39;привет, чувак!&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="check_no_numbers" class="doc_header"><code>check_no_numbers</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>check_no_numbers</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Return a list of digits, or empty list, if not found.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">check_no_numbers</span><span class="p">(</span><span class="s1">&#39;Цифры есть 1 12 13.4&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="s1">&#39;13&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">check_no_numbers</span><span class="p">(</span><span class="s1">&#39;Цифр нет&#39;</span><span class="p">),</span> <span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_specials" class="doc_header"><code>remove_specials</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_specials</code>(<strong><code>text</code></strong>:<code>str</code>, <strong><code>purge_digits</code></strong>:<code>bool</code>=<em><code>None</code></em>)</p>
</blockquote>
<p>Replace predefined in <code>_specials</code> sequence of characters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="purge_dots" class="doc_header"><code>purge_dots</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L51" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>purge_dots</code>(<strong><code>text</code></strong>, <strong><code>purgedots</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>If <code>purgedots</code>, <code>...</code>|<code>…</code> will be purged. Else replaced with <code>.</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word...&quot;</span><span class="p">),</span> <span class="s1">&#39;Word.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word…&quot;</span><span class="p">,),</span> <span class="s1">&#39;Word.&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word...&quot;</span><span class="p">,</span> <span class="n">purgedots</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word…&quot;</span><span class="p">,</span>   <span class="n">purgedots</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot; …Word&quot;</span><span class="p">,),</span> <span class="s1">&#39; Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s2">&quot;Word..&quot;</span><span class="p">,),</span> <span class="s1">&#39;Word&#39;</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">purge_dots</span><span class="p">(</span><span class="s1">&#39;Многоточие... Многоточие… … …Многоточие&#39;</span><span class="p">),</span>
                        <span class="s1">&#39;Многоточие. Многоточие.  Многоточие&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Скобки у аббревиатур (вайфай) удаляем.&#39;</span><span class="p">),</span><span class="s1">&#39;Скобки у аббревиатур вайфай удаляем.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Метки времени 01:12 или 01.01, (01:12) или (01.01) удаляем.&#39;</span><span class="p">),</span>
                        <span class="s1">&#39;Метки времени  или ,  или  удаляем.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;Ой!. Ага?. / Стоп.&#39;</span><span class="p">),</span> <span class="s1">&#39;Ой! Ага?  Стоп.&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">remove_specials</span><span class="p">(</span><span class="s1">&#39;*США* _Френсис_&#39;</span><span class="p">),</span> <span class="s1">&#39;США Френсис&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="expand_abbreviations" class="doc_header"><code>expand_abbreviations</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L69" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>expand_abbreviations</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p><code>expand_abbreviations()</code> defined in <code>_abbreviations</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span>
    <span class="n">expand_abbreviations</span><span class="p">(</span><span class="s1">&#39;Привет Джон, т.е. Иван. Т.к. русский. И т.д. И т.п.&#39;</span><span class="p">),</span>
                         <span class="s1">&#39;Привет Джон, то есть Иван. так как русский. и так далее. и тому подобное.&#39;</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unify_dash_hyphen" class="doc_header"><code>unify_dash_hyphen</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L77" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unify_dash_hyphen</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Unify dash and hyphen symbols -- replace with emdash or hyphen, separate with space.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2212&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># minus sign</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2012&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># figure dash</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2010&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="c1"># hyphen</span>
    <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2011&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))),</span><span class="c1"># non-breaking hyphen</span>
    <span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я &#39;</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="s1">&#39;Джейми Кейлер&#39;</span><span class="p">),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я&#39;</span> <span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span> <span class="s1">&#39;Джейми Кейлер&#39;</span><span class="p">),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">collapse_whitespace</span><span class="p">(</span><span class="n">unify_dash_hyphen</span><span class="p">(</span><span class="s1">&#39;Я&#39;</span> <span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2013&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; Джейми Кейлер&#39;</span><span class="p">)),</span><span class="s1">&#39;Я – Джейми Кейлер&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rm_quot_marks" class="doc_header"><code>rm_quot_marks</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rm_quot_marks</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Remove quotation marks from <code>text</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">rm_quot_marks</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="se">\&#39;</span><span class="s1">«»‘’‚‛“”„‟‹›❮❯❛❜❝❞❟❠&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Test-Text-Strings-Equality">Test Text Strings Equality<a class="anchor-link" href="#Test-Text-Strings-Equality"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="texts_equal" class="doc_header"><code>texts_equal</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>texts_equal</code>(<strong><code>text1</code></strong>:<code>str</code>, <strong><code>text2</code></strong>:<code>str</code>, <strong><code>ignore_e</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>verbose</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Check if <code>text1</code> equals <code>text2</code>. Optionally ignore diff between <code>е</code> and <code>ё</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;что-ли а&quot;</span><span class="p">,</span> <span class="s2">&quot;что-то и&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(False, &#39;что ЛИ А&#39;, &#39;что ТО И&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;что-ли а&quot;</span><span class="p">,</span> <span class="s2">&quot;что-то и&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(False, &#39;что ЛИ А&#39;, &#39;что ТО И&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;1234&quot;</span><span class="p">,</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;1234&quot;</span><span class="p">,</span> <span class="s2">&quot;12345&quot;</span><span class="p">))</span>
<span class="c1">#test_stdout(lambda: test_eq(texts_equal(&quot;1234&quot;, &quot;12345&quot;, verbose = True), False), &quot;Not equal length&quot;)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">,</span> <span class="n">ignore_e</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;все&quot;</span><span class="p">,</span> <span class="s2">&quot;всё&quot;</span><span class="p">,</span> <span class="n">ignore_e</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;всЕ&quot;</span><span class="p">,</span> <span class="s2">&quot;всЁ&quot;</span><span class="p">))</span>
<span class="c1">#test_stdout(lambda: texts_equal(&quot;все&quot;, &quot;всё&quot;, ignore_e = False, verbose = True), &quot;всЕ != всЁ&quot;)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">texts_equal</span><span class="p">(</span><span class="s2">&quot;слово ещё одно&quot;</span><span class="p">,</span> <span class="s2">&quot;слово ещё одно&quot;</span><span class="p">),</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="s2">&quot;слово ещё одно&quot;</span><span class="p">,</span> <span class="s2">&quot;слово ещё одно&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pipelines">Pipelines<a class="anchor-link" href="#Pipelines"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="basic_cleaner" class="doc_header"><code>basic_cleaner</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L136" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>basic_cleaner</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Basic pipeline: lowercase and collapse whitespaces.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">basic_cleaner</span><span class="p">(</span>
    <span class="s1">&#39;Привет   Джон, т.е. Иван, т.к. русский. И т.д.   и т.п.&#39;</span><span class="p">),</span>
    <span class="s1">&#39;привет джон, т.е. иван, т.к. русский. и т.д. и т.п.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="russian_cleaner" class="doc_header"><code>russian_cleaner</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>russian_cleaner</code>(<strong><code>text</code></strong>, <strong><code>purge_digits</code></strong>=<em><code>True</code></em>, <strong><code>_purge_dots</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Pipeline for cleaning Russian text.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="russian_cleaner2" class="doc_header"><code>russian_cleaner2</code><a href="https://github.com/kdorichev/text2speech/tree/master/text2speech/text_norm.py#L155" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>russian_cleaner2</code>(<strong><code>text</code></strong>, <strong><code>purge_digits</code></strong>=<em><code>True</code></em>, <strong><code>_purge_dots</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Pipeline for cleaning and lowercase Russian text.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span>
        <span class="s1">&#39;Привет «Джон», т.е.     Иван, т.к. русский... И т.д. и т.п. Ой!. Ага?. / &quot;Стоп&quot;..&#39;</span><span class="p">),</span>
        <span class="s1">&#39;Привет Джон, то есть Иван, так как русский. и так далее. и тому подобное. Ой! Ага? Стоп&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sentences-Tokenizer">Sentences Tokenizer<a class="anchor-link" href="#Sentences-Tokenizer"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">razdel</span> <span class="kn">import</span> <span class="n">sentenize</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;/home/condor/git/cyrillica/b-ish.txt&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;\ufeff\n\n\n\n\n\n\n\nВсе думают, что знают историю Америки, но когда заходит речь о морских приключениях, мы пересказываем сказки. Взять хотя бы морских чудовищ – пиратов. Вы знали, что они сражались совсем не так, как нам показывают в кино? И что Чёрная Борода боялся, как бы враги не раскрыли его секрет? И что за фокусы с исчезновением показывает Бермудский треугольник? (00:25) Инопланетяне не угоняли звено «девятнадцать», виновник жил у нас дома. Суши вёсла, парень, я – Джейми Кэйлер. Пора порубить мифы на мелкие кусочки… и выкопать сундук… с правдой. \n\n\nАМЕРИКА:  ФАКТЫ  И  ДОМЫСЛЫ\n\n\nЗолотой век пиратства пришёлся на период с тысяча шестьсот  девяностого по тысяча семьсот тридцатый год. Но большинство пиратов быстро отходили от дел. Эдвард Тич.. знаменитый Чёрная Борода.. наводил страх на моря меньше двух лет. Как и многие пираты, он получил раннюю пенсию.. вместе с ударом абордажной сабли. Короткая карьера, зато наследие на века. Но всё, что мы знаем, омыто океаном фантазии. Аж поджилки трясутся.\n\n\nРеальность пиратства далеко не романтична.\n\n\nКевин Макдоналд, Университет Лойолы\n\n\nДалеко не Голливуд.\n\n\nМиф складывался постепенно.\n\n\nРоберт Ричи, писатель\n\n\nВот что мы уже знаем про пиратов и пиратство, детки. / Волны Карибского моря и Атлантики не знают закона из-за орды варваров в маскарадных костюмах. \n\n\nПовязка на одном глазу, деревянная нога, попугай на плече, вооружены до зубов.\n\n\nПод командованием капитанов-самодуров корабли под флагом с черепом и костями.. обрушивают шквал ядер на торговые суда, вырезают команды и заставляют оставшихся в живых пройти по доске. / 02:30 Захватив золото, серебро, драгоценности и дублоны, пираты прятали добычу в тайном месте и перепрятывали с помощью карты-головоломки. Верно?\n\n\nДОМЫСЕЛ \n\n\nВ этой лихой истории спрятан целый сундук заблуждений, начиная с образа безбашенного капитана, которому все подчиняются. На самом деле власть опасного Чёрного Бороды была жёстко ограничена демократическими правилами пиратов.\n\n\nОни голосовали по каждому поводу.\n\n\nКристин Маркель Лампе, писатель\n\n\nОни могли изгнать капитана. Но только не во время битвы.\n\n\nПалубная демократия ничуть не похожа на диктатуру и унижения в европейском флоте. Враги пиратов, капитаны военных кораблей – вот настоящие тираны морей. \n\n\nОни считали матросов.. тупицами и.. отбросами…\n\n\nГейл Селинджер, писатель\n\n\nДержать их в узде можно только с помощью лишений.. и наказаний. А пираты, почти все, были.. матросами, и когда они уходили к пиратам, их экипажи не желали давать одному человеку столько власти. \n\n\nТолько во время боя власть капитана была абсолютной. И он может наводить ужас сколько пожелает. Перед каждым боем Чёрная борода… украшал волосы… медленно тлеющими запалами: казалось, что у него голова горит. \n\n\nПредставьте: стоите вы на палубе, и на вас надвигается огромный мужик с бородой, и вокруг его головы вьётся дым. ..Какой вы ни крутой, а всё равно закричите «помоги господи».\n\n\nА как же другие пиратские примочки? Крюки, повязки на глаза, костыли?\n\n\nА вот это всё правда.\n\n\nПираты – любимые клиенты изготовителей протезов, потому что в море легко получить увечье. Это боевые раны и травмы из-за плохо закреплённого груза. / 04:51 А ещё могут упасть снасти. / Но, несмотря на нехватку частей тела, пираты всё равно набивали сундуки дублонами. Верно?\n\n\nДОМЫСЕЛ \n\n\nБогатая добыча – большая редкость. Обычно пиратам доставались… карты, оружие, паруса, ром, мыло, свечи или одежда. \n\n\nОни не накопили… богатств. Тем более сокровищ. Они ухитрялись жить на огрызках… выживать.\n\n\nПиратам нужны люди. Поэтому в любой добыче, которую брали на кораблях, важны мужчины. Они выполняли различные задачи на корабле.\n\n\nА как же знаменитые набеги, когда в их крюки попадало бесценное сокровище? Его закапывали и составляли карту? \n\n\nДОМЫСЕЛ\n\n\nЧто за вздор, парень. Пираты… ничего не запасали на чёрный день. \n\n\nПираты спускали добычу быстро, как только заходили в порт: пьянство, азартные игры, женщины. Деньги тратились при первой возможности.\n\n\nПираты не держались за свои сокровища, потому что не рассчитывали прожить долго. \n\n\nТогда почему мы принимаем фантазии о закопанных сокровищах и картах за факты? Скажем спасибо шотландскому писателю Роберту Льюису Стивенсону и залихватским приключениям, которые он описал в тысяча восемьсот восемьдесят третьем году. \n\n\nПочти всё, что мы знаем и представляем себе о пиратах, взято из «Острова сокровищ» Стивенсона. Он придумал, что пираты закапывали сокровища.\n\n\nА ещё он придумал тайные карты, на которых нужное место отмечено крестом.\n\n\nОн нарисовал карту ещё до того, как написал роман, так что вся книжка была написала вокруг маленького крестика на карте. \n\n\nОн же придумал «пятнадцать человек на сундук мертвеца – йо-хо-хо и бутылка рома».\n\n\n\n1\n\n\n&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Все думают, что знают историю Америки, но когда заходит речь о морских приключениях, мы пересказываем сказки. Взять хотя бы морских чудовищ – пиратов. Вы знали, что они сражались совсем не так, как нам показывают в кино? И что Чёрная Борода боялся, как бы враги не раскрыли его секрет? И что за фокусы с исчезновением показывает Бермудский треугольник? Инопланетяне не угоняли звено девятнадцать, виновник жил у нас дома. Суши вёсла, парень, я – Джейми Кэйлер. Пора порубить мифы на мелкие кусочки. и выкопать сундук. с правдой. АМЕРИКА: ФАКТЫ И ДОМЫСЛЫ Золотой век пиратства пришёлся на период с тысяча шестьсот девяностого по тысяча семьсот тридцатый год. Но большинство пиратов быстро отходили от дел. Эдвард Тич знаменитый Чёрная Борода наводил страх на моря меньше двух лет. Как и многие пираты, он получил раннюю пенсию вместе с ударом абордажной сабли. Короткая карьера, зато наследие на века. Но всё, что мы знаем, омыто океаном фантазии. Аж поджилки трясутся. Реальность пиратства далеко не романтична. Кевин Макдоналд, Университет Лойолы Далеко не Голливуд. Миф складывался постепенно. Роберт Ричи, писатель Вот что мы уже знаем про пиратов и пиратство, детки. Волны Карибского моря и Атлантики не знают закона из-за орды варваров в маскарадных костюмах. Повязка на одном глазу, деревянная нога, попугай на плече, вооружены до зубов. Под командованием капитанов-самодуров корабли под флагом с черепом и костями обрушивают шквал ядер на торговые суда, вырезают команды и заставляют оставшихся в живых пройти по доске. Захватив золото, серебро, драгоценности и дублоны, пираты прятали добычу в тайном месте и перепрятывали с помощью карты-головоломки. Верно? ДОМЫСЕЛ В этой лихой истории спрятан целый сундук заблуждений, начиная с образа безбашенного капитана, которому все подчиняются. На самом деле власть опасного Чёрного Бороды была жёстко ограничена демократическими правилами пиратов. Они голосовали по каждому поводу. Кристин Маркель Лампе, писатель Они могли изгнать капитана. Но только не во время битвы. Палубная демократия ничуть не похожа на диктатуру и унижения в европейском флоте. Враги пиратов, капитаны военных кораблей – вот настоящие тираны морей. Они считали матросов тупицами и отбросами. Гейл Селинджер, писатель Держать их в узде можно только с помощью лишений и наказаний. А пираты, почти все, были матросами, и когда они уходили к пиратам, их экипажи не желали давать одному человеку столько власти. Только во время боя власть капитана была абсолютной. И он может наводить ужас сколько пожелает. Перед каждым боем Чёрная борода. украшал волосы. медленно тлеющими запалами: казалось, что у него голова горит. Представьте: стоите вы на палубе, и на вас надвигается огромный мужик с бородой, и вокруг его головы вьётся дым. Какой вы ни крутой, а всё равно закричите помоги господи. А как же другие пиратские примочки? Крюки, повязки на глаза, костыли? А вот это всё правда. Пираты – любимые клиенты изготовителей протезов, потому что в море легко получить увечье. Это боевые раны и травмы из-за плохо закреплённого груза. А ещё могут упасть снасти. Но, несмотря на нехватку частей тела, пираты всё равно набивали сундуки дублонами. Верно? ДОМЫСЕЛ Богатая добыча – большая редкость. Обычно пиратам доставались. карты, оружие, паруса, ром, мыло, свечи или одежда. Они не накопили. богатств. Тем более сокровищ. Они ухитрялись жить на огрызках. выживать. Пиратам нужны люди. Поэтому в любой добыче, которую брали на кораблях, важны мужчины. Они выполняли различные задачи на корабле. А как же знаменитые набеги, когда в их крюки попадало бесценное сокровище? Его закапывали и составляли карту? ДОМЫСЕЛ Что за вздор, парень. Пираты. ничего не запасали на чёрный день. Пираты спускали добычу быстро, как только заходили в порт: пьянство, азартные игры, женщины. Деньги тратились при первой возможности. Пираты не держались за свои сокровища, потому что не рассчитывали прожить долго. Тогда почему мы принимаем фантазии о закопанных сокровищах и картах за факты? Скажем спасибо шотландскому писателю Роберту Льюису Стивенсону и залихватским приключениям, которые он описал в тысяча восемьсот восемьдесят третьем году. Почти всё, что мы знаем и представляем себе о пиратах, взято из Острова сокровищ Стивенсона. Он придумал, что пираты закапывали сокровища. А ещё он придумал тайные карты, на которых нужное место отмечено крестом. Он нарисовал карту ещё до того, как написал роман, так что вся книжка была написала вокруг маленького крестика на карте. Он же придумал пятнадцать человек на сундук мертвеца – йо-хо-хо и бутылка рома.&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentenize</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Все думают, что знают историю Америки, но когда заходит речь о морских приключениях, мы пересказываем сказки.
Взять хотя бы морских чудовищ – пиратов.
Вы знали, что они сражались совсем не так, как нам показывают в кино?
И что Чёрная Борода боялся, как бы враги не раскрыли его секрет?
И что за фокусы с исчезновением показывает Бермудский треугольник?
Инопланетяне не угоняли звено девятнадцать, виновник жил у нас дома.
Суши вёсла, парень, я – Джейми Кэйлер.
Пора порубить мифы на мелкие кусочки. и выкопать сундук. с правдой.
АМЕРИКА: ФАКТЫ И ДОМЫСЛЫ Золотой век пиратства пришёлся на период с тысяча шестьсот девяностого по тысяча семьсот тридцатый год.
Но большинство пиратов быстро отходили от дел.
Эдвард Тич знаменитый Чёрная Борода наводил страх на моря меньше двух лет.
Как и многие пираты, он получил раннюю пенсию вместе с ударом абордажной сабли.
Короткая карьера, зато наследие на века.
Но всё, что мы знаем, омыто океаном фантазии.
Аж поджилки трясутся.
Реальность пиратства далеко не романтична.
Кевин Макдоналд, Университет Лойолы Далеко не Голливуд.
Миф складывался постепенно.
Роберт Ричи, писатель Вот что мы уже знаем про пиратов и пиратство, детки.
Волны Карибского моря и Атлантики не знают закона из-за орды варваров в маскарадных костюмах.
Повязка на одном глазу, деревянная нога, попугай на плече, вооружены до зубов.
Под командованием капитанов-самодуров корабли под флагом с черепом и костями обрушивают шквал ядер на торговые суда, вырезают команды и заставляют оставшихся в живых пройти по доске.
Захватив золото, серебро, драгоценности и дублоны, пираты прятали добычу в тайном месте и перепрятывали с помощью карты-головоломки.
Верно?
ДОМЫСЕЛ В этой лихой истории спрятан целый сундук заблуждений, начиная с образа безбашенного капитана, которому все подчиняются.
На самом деле власть опасного Чёрного Бороды была жёстко ограничена демократическими правилами пиратов.
Они голосовали по каждому поводу.
Кристин Маркель Лампе, писатель Они могли изгнать капитана.
Но только не во время битвы.
Палубная демократия ничуть не похожа на диктатуру и унижения в европейском флоте.
Враги пиратов, капитаны военных кораблей – вот настоящие тираны морей.
Они считали матросов тупицами и отбросами.
Гейл Селинджер, писатель Держать их в узде можно только с помощью лишений и наказаний.
А пираты, почти все, были матросами, и когда они уходили к пиратам, их экипажи не желали давать одному человеку столько власти.
Только во время боя власть капитана была абсолютной.
И он может наводить ужас сколько пожелает.
Перед каждым боем Чёрная борода. украшал волосы. медленно тлеющими запалами: казалось, что у него голова горит.
Представьте: стоите вы на палубе, и на вас надвигается огромный мужик с бородой, и вокруг его головы вьётся дым.
Какой вы ни крутой, а всё равно закричите помоги господи.
А как же другие пиратские примочки?
Крюки, повязки на глаза, костыли?
А вот это всё правда.
Пираты – любимые клиенты изготовителей протезов, потому что в море легко получить увечье.
Это боевые раны и травмы из-за плохо закреплённого груза.
А ещё могут упасть снасти.
Но, несмотря на нехватку частей тела, пираты всё равно набивали сундуки дублонами.
Верно?
ДОМЫСЕЛ Богатая добыча – большая редкость.
Обычно пиратам доставались. карты, оружие, паруса, ром, мыло, свечи или одежда.
Они не накопили. богатств.
Тем более сокровищ.
Они ухитрялись жить на огрызках. выживать.
Пиратам нужны люди.
Поэтому в любой добыче, которую брали на кораблях, важны мужчины.
Они выполняли различные задачи на корабле.
А как же знаменитые набеги, когда в их крюки попадало бесценное сокровище?
Его закапывали и составляли карту?
ДОМЫСЕЛ Что за вздор, парень.
Пираты. ничего не запасали на чёрный день.
Пираты спускали добычу быстро, как только заходили в порт: пьянство, азартные игры, женщины.
Деньги тратились при первой возможности.
Пираты не держались за свои сокровища, потому что не рассчитывали прожить долго.
Тогда почему мы принимаем фантазии о закопанных сокровищах и картах за факты?
Скажем спасибо шотландскому писателю Роберту Льюису Стивенсону и залихватским приключениям, которые он описал в тысяча восемьсот восемьдесят третьем году.
Почти всё, что мы знаем и представляем себе о пиратах, взято из Острова сокровищ Стивенсона.
Он придумал, что пираты закапывали сокровища.
А ещё он придумал тайные карты, на которых нужное место отмечено крестом.
Он нарисовал карту ещё до того, как написал роман, так что вся книжка была написала вокруг маленького крестика на карте.
Он же придумал пятнадцать человек на сундук мертвеца – йо-хо-хо и бутылка рома.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-characters-in-the-origial-text">Set of characters in the origial text<a class="anchor-link" href="#Set-of-characters-in-the-origial-text"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">text</span><span class="p">))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
 	32	0x20	True
,	44	0x2c	True
-	45	0x2d	True
.	46	0x2e	True
:	58	0x3a	True
?	63	0x3f	True
А	1040	0x410	True
Б	1041	0x411	True
В	1042	0x412	True
Г	1043	0x413	True
Д	1044	0x414	True
Е	1045	0x415	True
З	1047	0x417	True
И	1048	0x418	True
К	1050	0x41a	True
Л	1051	0x41b	True
М	1052	0x41c	True
Н	1053	0x41d	True
О	1054	0x41e	True
П	1055	0x41f	True
Р	1056	0x420	True
С	1057	0x421	True
Т	1058	0x422	True
У	1059	0x423	True
Ф	1060	0x424	True
Ч	1063	0x427	True
Ы	1067	0x42b	True
Э	1069	0x42d	True
а	1072	0x430	True
б	1073	0x431	True
в	1074	0x432	True
г	1075	0x433	True
д	1076	0x434	True
е	1077	0x435	True
ж	1078	0x436	True
з	1079	0x437	True
и	1080	0x438	True
й	1081	0x439	True
к	1082	0x43a	True
л	1083	0x43b	True
м	1084	0x43c	True
н	1085	0x43d	True
о	1086	0x43e	True
п	1087	0x43f	True
р	1088	0x440	True
с	1089	0x441	True
т	1090	0x442	True
у	1091	0x443	True
ф	1092	0x444	True
х	1093	0x445	True
ц	1094	0x446	True
ч	1095	0x447	True
ш	1096	0x448	True
щ	1097	0x449	True
ы	1099	0x44b	True
ь	1100	0x44c	True
э	1101	0x44d	True
ю	1102	0x44e	True
я	1103	0x44f	True
ё	1105	0x451	True
–	8211	0x2013	True
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-characters-in-the-cleaned-text">Set of characters in the cleaned text<a class="anchor-link" href="#Set-of-characters-in-the-cleaned-text"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">russian_cleaner2</span><span class="p">(</span><span class="n">text</span><span class="p">)))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
 	32	0x20	True
,	44	0x2c	True
-	45	0x2d	True
.	46	0x2e	True
:	58	0x3a	True
?	63	0x3f	True
а	1072	0x430	True
б	1073	0x431	True
в	1074	0x432	True
г	1075	0x433	True
д	1076	0x434	True
е	1077	0x435	True
ж	1078	0x436	True
з	1079	0x437	True
и	1080	0x438	True
й	1081	0x439	True
к	1082	0x43a	True
л	1083	0x43b	True
м	1084	0x43c	True
н	1085	0x43d	True
о	1086	0x43e	True
п	1087	0x43f	True
р	1088	0x440	True
с	1089	0x441	True
т	1090	0x442	True
у	1091	0x443	True
ф	1092	0x444	True
х	1093	0x445	True
ц	1094	0x446	True
ч	1095	0x447	True
ш	1096	0x448	True
щ	1097	0x449	True
ы	1099	0x44b	True
ь	1100	0x44c	True
э	1101	0x44d	True
ю	1102	0x44e	True
я	1103	0x44f	True
ё	1105	0x451	True
–	8211	0x2013	True
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Set-of-the-removed/replaced-characters">Set of the removed/replaced characters<a class="anchor-link" href="#Set-of-the-removed/replaced-characters"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Char</span><span class="se">\t</span><span class="s1">Dec</span><span class="se">\t</span><span class="s1">Hex</span><span class="se">\t</span><span class="s1">Printable?&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span> <span class="nb">set</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">russian_cleaner2</span><span class="p">(</span><span class="n">text</span><span class="p">))))):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="nb">hex</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">isprintable</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Char	Dec	Hex	Printable?
А	1040	0x410	True
Б	1041	0x411	True
В	1042	0x412	True
Г	1043	0x413	True
Д	1044	0x414	True
Е	1045	0x415	True
З	1047	0x417	True
И	1048	0x418	True
К	1050	0x41a	True
Л	1051	0x41b	True
М	1052	0x41c	True
Н	1053	0x41d	True
О	1054	0x41e	True
П	1055	0x41f	True
Р	1056	0x420	True
С	1057	0x421	True
Т	1058	0x422	True
У	1059	0x423	True
Ф	1060	0x424	True
Ч	1063	0x427	True
Ы	1067	0x42b	True
Э	1069	0x42d	True
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">check_no_numbers</span><span class="p">(</span><span class="n">russian_cleaner</span><span class="p">(</span><span class="n">text</span><span class="p">))</span><span class="o">==</span> <span class="p">[]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;Восклицательное предложение! А это какое? Инициалы -- не повод разрывать. Правда, А.С. Пушкин? -- Разумеется, голубчик. (Скобки оставляем.)&#39;&#39;&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">sentenize</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Восклицательное предложение!
А это какое?
Инициалы -- не повод разрывать.
Правда, А.С. Пушкин?
-- Разумеется, голубчик.
(Скобки оставляем.)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

